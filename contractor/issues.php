<?php require dirname(__DIR__) . '/database.php'; require dirname(__DIR__) . '/session-auth.php'; set_no_cache_headers(); check_auth(); require dirname(__DIR__) . '/includes/rbac.php'; rbac_require_from_matrix('contractor.workspace.manage', ['contractor','admin','super_admin']); check_suspicious_activity(); ?>
<!doctype html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Issues - Contractor</title><link rel="icon" type="image/png" href="/assets/images/icons/ipms-icon2.png"><link rel="stylesheet" href="../assets/css/design-system.css"><link rel="stylesheet" href="../assets/css/components.css"><link rel="stylesheet" href="../assets/css/admin.css?v=<?php echo filemtime(__DIR__ . '/../assets/css/admin.css'); ?>"><link rel="stylesheet" href="../assets/css/admin-unified.css?v=<?php echo filemtime(__DIR__ . '/../assets/css/admin-unified.css'); ?>"><link rel="stylesheet" href="../assets/css/admin-component-overrides.css"><link rel="stylesheet" href="../assets/css/admin-enterprise.css?v=<?php echo filemtime(__DIR__ . '/../assets/css/admin-enterprise.css'); ?>"><link rel="stylesheet" href="contractor.css?v=<?php echo filemtime(__DIR__ . '/contractor.css'); ?>"><link rel="stylesheet" href="../assets/css/contractor-module.css?v=<?php echo filemtime(__DIR__ . '/../assets/css/contractor-module.css'); ?>"></head><body>
<header class="nav" id="navbar"><div class="nav-logo"><img src="../assets/images/icons/ipms-icon.png" alt="" class="logo-img"><span class="logo-text">IPMS Contractor</span></div><div class="nav-links"><a href="my_projects.php"><img src="../assets/images/admin/list.png" class="nav-icon" alt="">My Projects</a><a href="issues.php" class="active"><img src="../assets/images/admin/notifications.png" class="nav-icon" alt="">Issues</a><a href="profile.php"><img src="../assets/images/admin/person.png" class="nav-icon" alt="">Profile</a></div><div class="nav-divider"></div><div class="nav-action-footer"><a href="/contractor/logout.php" class="btn-logout nav-logout"><span>Logout</span></a></div></header>
<section class="main-content" data-contractor-module data-module="issues" data-csrf="<?php echo htmlspecialchars((string)($_SESSION['csrf_token'] ?? ''), ENT_QUOTES, 'UTF-8'); ?>">
<div class="dash-header"><h1>Issues</h1><p>Report and track project issues for resolution.</p></div>
<div class="cm-card"><div class="cm-form"><select id="cmProject" class="cm-select"></select><input id="cmIssueType" class="cm-input" placeholder="Issue Type"><select id="cmSeverity" class="cm-select"><option>Low</option><option>Medium</option><option>High</option><option>Critical</option></select><input id="cmAttachment" type="file" class="cm-input" accept=".pdf,.jpg,.jpeg,.png"><textarea id="cmDescription" class="cm-textarea full" placeholder="Issue description"></textarea><button id="cmSubmitIssue" class="cm-btn" type="button">Submit Issue</button></div><div id="cmFeedback" class="cm-feedback"></div></div>
<div class="cm-card cm-table-wrap"><table class="cm-table"><thead><tr><th>Project</th><th>Issue</th><th>Severity</th><th>Status</th><th>Date</th></tr></thead><tbody id="cmIssuesBody"><tr><td colspan="5">Loading...</td></tr></tbody></table></div>
</section><script src="../assets/js/contractor-module.js?v=<?php echo filemtime(__DIR__ . '/../assets/js/contractor-module.js'); ?>"></script></body></html>
